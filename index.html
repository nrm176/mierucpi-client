<!DOCTYPE html>
<html ng-app="mieru_cpi">
<head lang="ja">
    <meta charset="UTF-8">
    <title>みえるCPI</title>
    <script src="bower_components/angular/angular.min.js"></script>
    <script src="bower_components/d3/d3.min.js"></script>
    <script src="bower_components/nvd3/build/nv.d3.min.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/angular-nvd3/dist/angular-nvd3.min.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>

    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="bower_components/nvd3/build/nv.d3.min.css">
    <script src="app.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 10px;
            padding: 0px;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<div ng-controller="MainCtrl">

    <!-- Year Form -->
    <form name="yearAndItemForm" ng-init="onInit()">
        <!-- Type Ahead Form -->
        <input type="text" ng-model="selectedItem"
               typeahead="item as item.name for item in items | filter:$viewValue">

        <!-- Item to select -->
        <select ng-model="selectedItem" ng-options="item as item.name for item in items" required
                ng-change="onChangeItem()">
            <option value="">Please select Item Name</option>
        </select>

        <!-- Year to select -->
        <select ng-model="selectedYr" ng-options="year as year.label for year in years" required
                ng-change="onChangeYr()">
            <option value="">Please select year</option>
        </select>
        <button ng-disabled="!yearAndItemForm.$valid" ng-click="render()">Refresh</button>
        <!-- <button ng-click="render_horizontalBarChart()">Horizontal Bar Chart</button> -->
    </form>
    {{selectedItem}} {{selectedYr}}
    <!-- visualizing chart -->
    <nvd3 options="options_lineChart" data="data"></nvd3>

    <!-- Bar Chart - select top&bottom n -->
    <hr>
    <form>
        <label>From:</label>
        <select ng-model="from_year" ng-options="y for y in year" required></select>
        <select ng-model="from_month" ng-options="m for m in month" required></select>

        <label>To:</label>
        <select ng-model="to_year" ng-options="y for y in year" required></select>
        <select ng-model="to_month" ng-options="m for m in month" required></select>

        <label>Top/Bottom</label>
        <select ng-model="top_bottom" ng-options="tb for tb in topbottom" required></select>
    </form>

    <button ng-click="render_barChart(from_year,from_month,to_year,to_month,top_bottom)" ng-model="barMsg">Bar Chart</button>
    {{barMsg}}
    <nvd3 data="data_barChart" options="options_barChart"></nvd3>

    <!-- comment out horizontal bar chart for now-->
    <!-- <nvd3 data="data_horizontalBarChart" options="options_horizontalBarChart"></nvd3> -->
</div>

</body>
</html>